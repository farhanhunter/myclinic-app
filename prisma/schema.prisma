generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Account {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  name      String
  role      String   @default("user")
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@map("mst_account")
}

model Client {
  id               Int       @id @default(autoincrement())
  nama             String
  alamat           String?
  noTelp           String?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
    
  pets             Pet[]
  examinations     Examination[]
  
  @@map("clients")
}

model Pet {
  id               Int       @id @default(autoincrement())
  clientId         Int
  namaHewan        String
  spesies          String
  breed            String?
  beratBadan       Float?
  umur             Int?
  umurSatuan       String?
  gender           String
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  
  client           Client    @relation(fields: [clientId], references: [id], onDelete: Cascade)
  examinations     Examination[]
  
  @@map("pets")
}

model Veterinarian {
  id               Int       @id @default(autoincrement())
  nama             String
  nomorLisensi     String?   @unique
  spesialisasi     String?
  noTelp           String?
  email            String?   @unique
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  
  examinations     Examination[]
  
  @@map("veterinarians")
}

model Examination {
  id                    Int       @id @default(autoincrement())
  clientId              Int
  petId                 Int
  veterinarianId        Int
  tanggalPemeriksaan    DateTime  @default(now())
  
  suhu                  Float?
  heartRate             Int?
  
  penampilan            String?   @db.Text
  mata                  String?   @db.Text
  telinga               String?   @db.Text
  hidung                String?   @db.Text
  mulut                 String?   @db.Text
  kulitRambut           String?   @db.Text
  limfonodus            String?   @db.Text
  mukosa                String?   @db.Text
  abdomen               String?   @db.Text
  thoraks               String?   @db.Text
  
  gastro                String?   @db.Text
  respiratory           String?   @db.Text
  tulangDanOtot         String?   @db.Text
  ekstremitas           String?   @db.Text
  urogenital            String?   @db.Text
  
  diagnosis             String?   @db.Text
  treatment             String?   @db.Text
  prescription          String?   @db.Text
  notes                 String?   @db.Text
  
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  
  client                Client         @relation(fields: [clientId], references: [id])
  pet                   Pet            @relation(fields: [petId], references: [id])
  veterinarian          Veterinarian   @relation(fields: [veterinarianId], references: [id])
  
  @@map("examinations")
}